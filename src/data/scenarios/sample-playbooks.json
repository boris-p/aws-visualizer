{
  "scenarios": [
    {
      "id": "basic-request-flow",
      "name": "Basic Request Flow",
      "description": "Shows a normal request path with no failures",
      "graphId": "ec2-scenario-playground",
      "infrastructureId": "simple-single-az",
      "durationMs": 2500,
      "events": [
        {
          "id": "initial-request",
          "timestampMs": 250,
          "action": "route-request",
          "targetType": "service",
          "targetId": "web-service-1"
        }
      ],
      "requestFlows": [
        {
          "id": "req-1",
          "sourceLocation": "User (Tokyo)",
          "targetServiceId": "web-service-1",
          "path": ["edge-tok", "region-us-east-1", "az-us-east-1-use1-az1", "dc-us-east-1-use1-az1-1"],
          "latencyMs": 1200,
          "status": "success",
          "routingStrategy": "cloudfront"
        }
      ],
      "expectedOutcome": "Request successfully reaches the server",
      "awsContext": {
        "useCloudFront": true,
        "useMultiAz": false,
        "useAutoScaling": false,
        "healthCheckEnabled": false
      }
    },
    {
      "id": "az-failure-no-redundancy",
      "name": "AZ Failure (No Redundancy)",
      "description": "Single AZ deployment fails - service becomes unavailable",
      "graphId": "ec2-scenario-playground",
      "infrastructureId": "simple-single-az",
      "durationMs": 6000,
      "events": [
        {
          "id": "request-1",
          "timestampMs": 500,
          "action": "route-request",
          "targetType": "service",
          "targetId": "web-service-1"
        },
        {
          "id": "az-fails",
          "timestampMs": 2500,
          "action": "fail",
          "targetType": "az",
          "targetId": "az-us-east-1-use1-az1",
          "failureType": "az-outage",
          "severity": "high",
          "failureMessage": "AZ Unavailable"
        },
        {
          "id": "request-2-fails",
          "timestampMs": 3500,
          "action": "route-request",
          "targetType": "service",
          "targetId": "web-service-1",
          "flowId": "req-2"
        }
      ],
      "requestFlows": [
        {
          "id": "req-1",
          "sourceLocation": "User (San Francisco)",
          "targetServiceId": "web-service-1",
          "path": ["edge-sfo", "region-us-east-1", "az-us-east-1-use1-az1", "dc-us-east-1-use1-az1-1"],
          "latencyMs": 1000,
          "status": "success",
          "routingStrategy": "cloudfront"
        },
        {
          "id": "req-2",
          "sourceLocation": "User (San Francisco)",
          "targetServiceId": "web-service-1",
          "path": ["edge-sfo", "region-us-east-1", "az-us-east-1-use1-az1", "dc-us-east-1-use1-az1-1"],
          "latencyMs": 800,
          "status": "failed",
          "routingStrategy": "cloudfront"
        }
      ],
      "expectedOutcome": "Service becomes completely unavailable when AZ fails",
      "awsContext": {
        "useCloudFront": true,
        "useMultiAz": false,
        "useAutoScaling": false,
        "healthCheckEnabled": false
      }
    },
    {
      "id": "az-failure-with-failover",
      "name": "AZ Failure with Automatic Failover",
      "description": "Multi-AZ deployment handles AZ failure gracefully",
      "graphId": "ec2-scenario-playground",
      "infrastructureId": "multi-az-redundant",
      "durationMs": 7500,
      "events": [
        {
          "id": "initial-traffic",
          "timestampMs": 500,
          "action": "route-request",
          "targetType": "service",
          "targetId": "web-service-ha",
          "flowId": "req-before-failure"
        },
        {
          "id": "az1-fails",
          "timestampMs": 2500,
          "action": "fail",
          "targetType": "az",
          "targetId": "az-us-east-1-use1-az1",
          "failureType": "az-outage",
          "severity": "high",
          "failureMessage": "AZ Unavailable"
        },
        {
          "id": "traffic-rerouted",
          "timestampMs": 3000,
          "action": "route-request",
          "targetType": "service",
          "targetId": "web-service-ha",
          "flowId": "req-during-failure"
        },
        {
          "id": "az1-recovers",
          "timestampMs": 5000,
          "action": "recover",
          "targetType": "az",
          "targetId": "az-us-east-1-use1-az1"
        },
        {
          "id": "traffic-rebalanced",
          "timestampMs": 5500,
          "action": "route-request",
          "targetType": "service",
          "targetId": "web-service-ha",
          "flowId": "req-after-recovery"
        }
      ],
      "requestFlows": [
        {
          "id": "req-before-failure",
          "sourceLocation": "User (San Francisco)",
          "targetServiceId": "web-service-ha",
          "path": ["edge-sfo", "region-us-east-1", "az-us-east-1-use1-az1", "dc-us-east-1-use1-az1-1"],
          "latencyMs": 900,
          "status": "success",
          "routingStrategy": "cloudfront",
          "visualState": "primary"
        },
        {
          "id": "req-during-failure",
          "sourceLocation": "User (San Francisco)",
          "targetServiceId": "web-service-ha",
          "path": ["edge-sfo", "region-us-east-1", "az-us-east-1-use1-az2", "dc-us-east-1-use1-az2-1"],
          "latencyMs": 950,
          "status": "success",
          "routingStrategy": "cloudfront",
          "visualState": "failover"
        },
        {
          "id": "req-after-recovery",
          "sourceLocation": "User (San Francisco)",
          "targetServiceId": "web-service-ha",
          "path": ["edge-sfo", "region-us-east-1", "az-us-east-1-use1-az1", "dc-us-east-1-use1-az1-1"],
          "latencyMs": 900,
          "status": "success",
          "routingStrategy": "cloudfront",
          "visualState": "primary"
        }
      ],
      "expectedOutcome": "Traffic automatically reroutes to healthy AZ, then rebalances after recovery",
      "awsContext": {
        "useCloudFront": true,
        "useMultiAz": true,
        "useAutoScaling": false,
        "healthCheckEnabled": true
      }
    }
  ]
}
